 - 네트워크는 단순히 호스트와 호스트를 연결하는 것이 아니다.
 - 네트워크 디자인과 구성에 따라 호스트 간 통신 경로가 달라지고 이것은 서비스 품질에도 영향을 미친다.

 <br>

 >13.1 2계층/3계층 네트워크
  - 2계층 네트워크는 이름 그대로 호스트간 통신이 직접 2계층 통신만으로 이루어지는 네트워크 디자인
    - 2계층 통신을 하려면 통신할 호스트가 동일한 네트워크여야 함
    - 게이트웨이를 거치지 않고 직접 호스트 간 통신 가능
    - 루프 문제를 해결하기 위해 스패닝 트리 프로토콜(STP) 사용
    - 블록 포인트 발생 방지를 위해 논블로킹 구조 구현(MC-LAG 기술 등)
  - 3계층 네트워크는 호스트 간 통신이 IP 라우팅과 같은 3계층 통신으로 이루어지는 네트워크 디자인
    - 라우팅으로 구성되어 루프 문제가 발생하지 않음
  
<br>

 >13.2 3-Tier 아키텍처
  - 코어(Core) - 애그리게이션(Aggregation) - 액세스(Access) 3계층으로 이루어진 네트워크 아키텍처
    - 호스트가 직접 연결된 액세스 계층에 스위치가 있다.
    - 액세스 스위치를 중간에서 집선하는 애그리게이션 스위치가 그 상단에 있음
    - 코어 계층 스위치는 애그리게이션 스위치를 다시 모아 서로 통신할 수 있게 연결해준다.
  - 상위 레이어로 올라갈수록 장비들이 집선되므로 높은 대역폭(BandWidth)이 필요

<br>

 >13.3 2-Tier 아키텍처
  - 스파인-리프 구조 (Spine-Leaf 2 Tier)
    - 데이터 센터 디자인으로 많이 적용되고 있다.
    - 하단 호스트가 연결되는 리프 스위치는 상단 스파인 스위치와 연결됨
    - 리프 스위치와 스파인 스위치 간에는 전통적인 2계층 스패닝 트리가 동작하지 않고 모든 링크를 사용해 트래픽을 전송
    - 데이터 센터 내부의 East-West 트래픽이 많아져서 3계층 아키텍처 대신 스파인-리프 구조 채용
    - 스파인 리프- 스위치 사이는 2계층 네트워크나 3계층 네트워크 구성이 가능하다.

<br>

  - L2 패브릭
    - 스파인-리프 구조에서 스파인-리프 사이를 2계층 네트워크로 구성하는 방법
    - L2 패브릭을 구성하기 위해 TRILL이나 SPB와 같은 프로토콜 사용
    - 2계층에서 흔히 발생하는 루프와 같은 문제를 해결하도록 구현되어 있음
    - TRILL (TRansparent Interconnectino of Lots of Links)
    - SPB (Shortest Path Bridging)


<br>

  - L3 패브릭
    - 스파인-리프 구조에서 스파인과 리프 사이를 3계층 네트워크로 구성하는 방법
    - 스파인과 리프가 연결된 링크는 각각 라우팅이 활성화되어 있고 일반적인 라우팅 프로토콜을 이용해 정보 교환
    - 하단 호스트의 네트워크가 리프 간에 서로 다른 네트워크를 갖게됨
    - 이런 환경은 가상화 서버의 라이브 마이그레이션과 같은 서비스를 위해 사용됨
    - 이런 오버레이 기술을 사용하면 IP 이동이 보장되는 네트워크 구성 가능

<br>

 >13.4 데이터 센터 Zone/PoD 내부망/DMZ망/인터넷망
  - 데이터 센터를 설계할 때는 데이터 센터의 다양한 구성 요소와 역할을 고려해야함
  - 하나의 큰 망 안에서 다양한 역할을 모두 수행할 수도 있지만 보안이나 관리상 이유로 용도별로 데이터 센터망을 분리해 설계함
  - 분리된 망은 용도별로 나누어져 있어 망 간 보안을 고려해 방화벽과 같은 보안 장비와 연동하도록 구성
  - 이번 챕터에서 확인할 것은 데이터 센터 내에서 구성해야하는 망의 종류와 역할

<br>

  - 인터넷망
    - 외부 인터넷에서 사용자가 데이터 센터에 접근할 수 있도록 구성된 영역
    - KT, LGU+, SKB와 같은 ISP(Internet Service Provider)에서 인터넷 회선을 받아 연동
    - 단일 회선으로 구성할 수도 있지만 규모가 더 크다면 서비스 안정성을 위해 ISP 연결을 이중화하거나 삼중화 한다.

<br>

  - 공인망(DMZ)
    - 데이터 센터에서 외부 사용자에게 직접 노출되는 웹 서비스 등의 서버들이 모인 망
    - 데이터 센터 외부 접근을 위해 공인 IP가 사용되어 공인망이라고 부르거나 서비스를 외부로 제공하므로 서비스망이라고도 부른다.
    - 언트러스트 네트워크인 '데이터 센터 외부의 인터넷 구간'과 트러스트 네트워크인 '데이터 센터 내부망'의 연결 지점 역할을 하여 DMZ라고도 부름

<br>

  - 내부방(사내망/사설망)
    - 사내에서만 접근할 수 있는 네트워크
    - 외부망과 통신할 때는 사설 IP로 통신할 수 없으므로 외부망으로 나가려면 중간에 공인 IP로 변환해주는 NAT 필요

<br>

  - 데이터베이스망
    - 데이터베이스는 개인정보를 취급하는 경우가 많아 보안을 강화하기 위해 내부망에 데이터베이스망을 별도로 두기도 함
    - 서버 간 통신이 아니면 보안을 더 강화하기 위한 접근 통제 시스템을 운영하고 데이터베이스에 접속할 떄는 접근 통제 시스템을 통해야만 가능하도록 구성

<br>

  - 대외망
    - 회사 대 회사로 서비스 연동이 필요한 경우, 인터넷망을 통해 연동할 수도 있지만 별도 전용선이나 VPN을 이용해 서비스를 연동할 수도 있음
    - 금융서비스와 같이 보안이 더 필요한 경우 전용회선과 VPN을 동시에 사용하기도 함

<br>

  - 관리망/OoB(Out of Bound)
    - 데이터 센터 내 서버나 네트워크 장비는 서비스를 위한 인터페이스도 있지만 장비 자체를 관리하기 위한 관리용 인터페이스를 별도로 제공하기도 한다.
    - 네트워크 관리망
      - 장비 운용을 위한 CLI나 웹 접속을 위해 사용
      - 서비스망과의 분리가 필요한 이유는 서비스망에 문제가 발생하더라도 서비스망과 별도로 분리된 관리망을 통해 장비에 접근해야하기 때문
    - 서버 관리망
      - 서버 관리망은 하드웨어 자체를 관리하기 위한 별도의 환경

<br>

 >13.5 케이블링과 네트워크

  - 데이터 센터 내에는 네트워크 장비는 물론 서버, 스토리지와 같은 장비를 수용할 수 있는 랙(Rack)이 많이 있다.
  - ToR과 EoR은 데이터 센터 내에서의 스위치와 서버 간 케이블링 구성 방식에 따라 구분됨

<br>

  - ToR (Top of Rack)
    - 랙 상단에 개별적으로 설치되는 스위치 구성
    - 일반적으로 각 랙 최상단에 ToR스위치를 구성하고 해당 랙에 있는 서버를 연결
    - 각 랙에 구성된 서버들은 해당 랙에 있는 ToR 스위치에 연결되고 ToR 스위치는 상단 네트워크 장비에 모두 연결되는 구성
    - 서버가 스위치와 동일한 랙에 있으므로 케이블링의 길이나 복잡성이 줄어듬
    - EoR구성보다 스위치가 더 많이 필요해 관리사항이 늘어남

<br>

  - EoR (End of Rack)
    - 랙이 있는 행 끝에 네트워크 장비를 두고 각 랙에 있는 서버는 네트워크 장비가 있는 랙까지 케이블로 연결
    - ToR보다 필요한 스위치 장비 수가 줄어듬
    - 서버와의 케이블 구성이 더 멀어져서 복잡도가 높아지고 케이블이 길어짐

<br>

  - MoR (Middle of Rack)
    - EoR과 마찬가지로 서버에 연결될 네트워크 장비 랙을 별도로 구성하는 점은 같지만 네트워크 장비의 랙을 행 끝이아닌 중간에 둔다.
    - 케이블 길이가 전반적으로 줄어든다.

<br>
- 고민해볼 수 있는것
  - 2티어 네트워크와 3티어 네트워크의 차이 숙지

<br>