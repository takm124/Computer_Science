 - 이중화 기술은 안정적인 서비스를 제공하기 위해 필요하다
 - 인프라를 두 대 이상 구성하거나 하나의 장비 내에 NIC같은 내부 구성요소를 다중으로 구성하기도 하고 동일한 역할을 하는 애플리케이션을 동시에 여러개 띄우기도 함 

 <br>

 >11.1 이중화 기술 개요 
  - 이중화를 하지 않았을 때 가장 두드러지는 문제는 SPoF(Single Point of Failure)
    - 시스템 구성 요소 중 동작하지 않으면 전체 시스템이 중단되는 요소

<br>

  - 이중화의 목적
    - 이중화 구성은 액티브-액티브 또는 액티브-스탠바이 형태로 구성
    - 액티브 -액티브 구성일 떄는 서비스 요청 동시처리가 가능하므로 처리 가능한 전체 용량 증가

<br>

 >11.2 LACP (Link Aggregation Control Protocol)
  - 과거엔 각 벤더별로 장비 간 대역폭을 늘리기 위해 독자적인 방법으로 구현했지만 다른 장비끼리 연결할 때 호환성 문제가 생김
    - 이 문제를 해결하기 위해 상호호환 가능한 연결 계층 표준화를 시작함
    - 이 표준화가 LACP
  - Link Aggregation의 목적
    - 링크 사용률 향상(Improved Utilization of Available Link)
    - 향상된 장애 회복(Improved Resilience)
  - LACP를 사용하면 두 개 이상의 물리 인터페이스로 구성된 논리 인터페이스를 이용해 모든 물리 인터페이스를 액티브 상태로 사용
    - 즉, 다수의 물리 인터페이스를 하나의 논리 인터페이스로 구성한다는 것
  - 유의사항
    - 액티브-액티브 구조이므로 논리 인터페이스의 대역폭을 서비스에 필요한 전체 트래픽 기준으로 서비스 트래픽을 산정하면 안됨
  - LACP를 통해 장비 간 논리 인터페이스를 구성하기 위해 LACPDU(LACP Data Unit)라는 프레임을 사용
    - LACPDU는 멀티캐스트 이용
    - LACPDU를 장비에 주고받으면서 설정 변경

<br>

 >11.3 서버의 네트워크 이중화 설정(Window, Linux)
  - 인터페이스 이중화에 사용되는 기술 명칭
    - 윈도우 : 팀/team/티밍/teaming
    - 리눅스 - 본드/bond/본딩/bonding
  - 서버의 인터페이스 이중화 구성은 네트워크 인터페이스 이중화와 다름

<br>

  - 리눅스 본딩 모드는 모드 0 - 4 까지 있다
  - 실무에서는 액티브 - 스탠바이로는 모드 1을 사용하고 액티브 - 액티브로는 모드 4를 사용, 나머지는 사용 잘 안함
  - 모드 1 : 액티브-스탠바이
    - 액티브가 죽으면 스탵바이 인터페이스가 자동으로 활성화되어 패킷 전송
  - 모드 4 : LACP
    - LACP를 이용해 액티브-액티브 사용

<br>
 >11.4 MC-LAG (Multi-Chassis Link Aggregation Group)
  - 스위치에서 서버 이중화 구성처럼 서로 다른 스위치 간의 단일 MAC 주소를 사용해 액티브-액티브 구성을 하는 것
  - 서로 다른 스위치 간의 실제 MAC 주소 대신 가상 MAC 주소를 만들어 논리 인터페이스로 LACP 구성
  - MC-LAG 기술을 이용하면 단일 스위치로 LACP를 구성해 대역폭을 확장할 것인지, 서로 다른 스위치로 구성해 장비 이중화로 가용성을 확보할 것인지 선택 가능


<br>

 >11.5 게이트웨이 이중화
  - 특정 호스트가 동일한 서브넷에 있는 내부 네트워크와 통신할 때는 ARP를 직접 브로드캐스트해 출발지와 목적지가 직접 통신함
    - 라우터 없이 통신하므로 L2 통신임
    - 외부 네트워크와 통신할 때는 게이트웨이를 통과하는데 이건 L3 통신임
    - 따라서 호스트에 게이트웨이 설정이 안되어있거나 잘못되어있으면 외부 통신 불가
    - 게이트웨이 장비에 에러가 발생해도 마찬가지다.
  - FHRP (First Hop Redundancy Protocol)
    - 외부 네트워크와 통신하기 위해 사용되는 게이트웨이 장비를 두 대 이상의 장비로 구성할 수 있는 프로토콜
    - FHRP 기술에 대한 표준 프로토콜을 VRRP(Virtual Router Redundancy Protocol)
  
  

<br>
- 고민해볼 수 있는것
  - SpoF가 발생할 수 있어 이중화가 필요한 구간과 각 동작 원리를 숙지하기


<br>