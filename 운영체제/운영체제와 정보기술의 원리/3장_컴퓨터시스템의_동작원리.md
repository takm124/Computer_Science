 >3.1 컴퓨터 시스템의 구조
  - 컴퓨터 시스템
    - 내부장치 : CPU, 메모리
    - 외부장치 : 디스크, 키보드, 마우스, 모니터, 네트워크 장치 등
  - 외부장치와 내부장치 사이에서 데이터 전달이 이루어졌다면, 입출력(I/O)이 진행된것
  - 커널(Kernel) : 운영체제 중 항상 메모리에 올라가 있는 부분

<br>

 >3.2 CPU 연산과 I/O 연산
  - 컴퓨터에서 연산을 한다는 것은 CPU가 일한다는 것
  - 입출력 장치들의 I/O 연산은 입출력 컨트롤러가 담당하고, 컴퓨터 내에서 수행되는 연산은 메인 CPU가 담당
    - 이 때 입출력장치와 CPU 동시 수행 가능
  - 장치 컨트롤러는 로컬 버퍼가 있음 (입출력 데이터 임시 저장)
  - 프로그램에서 입출력 장치로 명령을 내리면, 작업 수행 이후 입출력 컨트롤러가 CPU로 인터럽트 발생시켜 CPU에 보고함
    - CPU에는 인터럽트 라인이 있어서, 신호가 들어오면 인터럽트와 관련된 일을 먼저 처리
    - **핵심은 인터럽트는 입출력 컨트롤러가 발생시킨다는 것**



<br>

>3.3 인터럽트의 일반적 기능 
  - 운영체제 커널에는 인터럽트가 들어왔을 때 해야 할 일이 미리 다 프로그래밍 되어 그 코드가 보관되어 있음
  - 입출력 컨트롤러가 인터럽트를 발생시키면 CPU는 하던 일을 잠시 멈추고 인터럽트가 발생했을 때 수행하도록 정의된 코드를 찾아 수행
  - 인터럽트 종류
    - 하드웨어 인터럽트 : 컨트롤러 등 하드웨어 장치가 CPU의 인터럽트 라인을 세팅
    - 소프트웨어 인터럽트 : 소프트웨어가 수행
  - 인터럽트 벡터
    - 인터럽트 종류마다 번호를 정해서, 번호에 따라 처리해야 할 코드가 위치한 부분을 가리키고 있는 자료구조
    - 실제 처리해야 할 코드는 인터럽트 처리루틴 또는 인터럽트 핸들러라고 불리는 곳에 저장
  - 통상적인 인터럽트는 하드웨어 인터럽트를 의미하고, 소프트웨어 인터럽트는 트랩(trap)이라는 용어로 불림
    - 예로는 예외상황(exception)과 시스템 콜(system call)이 있음
    - 예외상황은 말 그대로 비정상적 작업시에 발생
    - 시스템콜은 사용자 프로그램이 운영체제 내부에 정의된 코드를 실행하고 싶을 때 운영체제에 서비스를 요청하는 방법

<br>

>3.4 인터럽트 핸들링
  - 인터럽트가 발생한 경우에 처리해야 할 일의 절차를 의미
  - 프로그램 A가 실행중일 때 인터럽트가 발생하면 A의 현재 상태 저장
    - 현재 상태 : 실행중인 명령의 메모리 주소 및 부가적인 정보
  - PCB (Process Control Block) : 프로세스 제어 블록 (자료구조)
    - 각각의 프로그램마다 하나씩 존재하며해당 프로그램의 어느 부분이 실행 중이었는지 저장
    - 실행 중이던 코드의 메모리 주소와 레지스터값, 하드웨어 상태 등

<br>

>3.5 입출력 구조
  - 입출력은 컴퓨터 시스템이 컴퓨터 외부의 입출력 장치들과 데이터를 주고받는 것
  - 입출력 방식
    - 동기식 입출력
    - 비동기식 입출력
  - 자세한 사항은 따로 정리 예정

<br>


>3.6 DMA
  - 원칙적으로 메모리는 CPU에 의해서만 접근할 수 있는 장치
  - 모든 메모리 접근 연산이 CPU에 의해서만 이루어지면 CPU 효율이 떨어짐
  - 이러한 비효율 극복을 위한 장치 : DMA (Direct Memory Access)
    - DMA는 일종의 컨트롤러이다.
    - CPU가 입출력 장치들의 메모리 접근 요청에 의해 자주 인터럽트 당하는 것을 막아줌
    - 로컬버퍼에서 메모리로 읽어오는 작업을 DMA가 대행함
      - 읽어올때 바이트가 아니라 block이라는 큰 단위로 읽어오고 CPU로 인터럽트 발생시킴


<br>

>3.7 저장장치의 구조
  - 주기억장치
    - 보통 메모리라고 부름
    - 전원이 나가면 저장되었던 내용이 모두 사라지는 RAM을 매체로 사용
  - 보조기억장치
    - 전원이 나가도 저장된 내용을 기억할수 있는 비휘발성의 마그네틱 디스크 사용
    - 용도
      - 파일시스템
      - 메모리의 연장 공간인 스왑 영역


<br>

>3.8 저장장치의 계층 구조
  - 저장장치는 빠른 저장장치부터 느린 저장당치까지 단계적인 계층구조로 이루어짐
  - 빠른 저장장치
    - 단위 공간당 가격이 높기 때문에 적은 용량 사용
  - 느린 저장장치
    - 단위 공간당 가격이 낮기 때문에 대용량을 사용하는 반면 접근 속도가 느림
  - (빠름) 레지스터 - 캐시 메모리 - 메인 메모리 - 마그네틱 디스크 - 광디스크 - 마그네틱 테이프 (느림)


<br>

>3.9 하드웨어의 보안
  - 우리가 흔히 사용하는 운영체제는 여러 프로그램이 동시에 실행될 수 있는 다중 프로그래밍 환경에서 동작
    - 각 프로그램간의 충돌이 일어날 수 있음을 의미함
  - 하드웨어적 보안을 위해 커널모드와 유저모드 지원
    - 커널 모드는 모든 종류의 명령 실행 가능
    - 유저 모드에서는 제한된 명령 실행
  - 컴퓨터 시스템은 CPU 내부에 모드 비트를 두어 사용자 프로그램 감시
    - 0은 커널모드, 1은 사용자모드
    - 운영체제가 무언가를 처리할때는 0으로, 사용자 프로그램은 1로 세팅
  - 입출력은 특권명령으로, 모드비트가 0일때만 수행가능하다.


<br>

>3.10 메모리 보안
  - 하나의 프로그램이 다른 프로그램의 메모리 영역을 침범하게 하지 않기 위한 보안 장치가 필요하다.
  - 2개의 레지스터를 이용하여 프로그램이 접근하려는 메모리 부분이 합법적인지 체크한다.
    - 기준 레지스터 (base register) : 어떤 프로그램이 수행되는 동안 그 프로그램이 합법적으로 접근할 수 있는 메모리상의 가장 주소 저장
    - 한계 레지스터 (limit register) : 기준 레지스터값부터 접근할 수 있는 메모리의 범위 보관
    - 즉, 기준 레지스터값을 A, 한계 레지스터값이 B인 경우 그 프로그램은 A에서 B사이의 메모리 공간만 사용할 수 있다는 의미
  - 이 외에도 다양한 메모리 관리 기법이 있다.


<br>

>3.11 CPU 보호
  - CPU 독점을 방지하기 위해 타이머라는 하드웨어 사용
    - 정해진 시간이 지나면 인터럽트를 발생시켜 운영체제가 CPU의 제어권을 획득할 수 있도록 하는 역할 수행
    - 매 클럭 틱마다 1씩 감소


<br>

>3.12 시스템 콜을 이용한 입출력 수행
  - 사용자 프로그램은 특권명령인 입출력 명령을 수행할 수 없기 때문에 운영체제에게 시스템 콜이라는 서비스 대행 요청을 한다.


<br>

